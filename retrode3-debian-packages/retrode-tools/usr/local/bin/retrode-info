#!/bin/bash
# retrode-info slot - try to find out Game name

case "$1" in
	/dev/slot-snes )	# SNES
		echo 10 | /usr/local/bin/retrode | fgrep "Name: " | sed 's/Name: //'
		;;
	/dev/slot-md )	# MD
	# echo 200 | /usr/local/bin/retrode | fgrep "CRC32..." | sed 's/CRC32... [0-9a-zA-Z]* -> \(.*\).md/\1/'
		echo 205 | /usr/local/bin/retrode >/tmp/$$
	NAME="$(fgrep "Name: " </tmp/$$ | sed 's/Name: //')"
	ID="$(fgrep "Id: " </tmp/$$ | sed 's/Name: //')"
	[ "$NAME" -a "$ID" ] && echo "$NAME ($ID)" || echo unidentified
		;;
	/dev/slot-nes )	# NES
		echo 0 | /usr/local/bin/retrode | fgrep .nes | sed 's/.nes//'
		;;
	* )
		echo unknown device "$1"
		exit 1
		;;
esac
