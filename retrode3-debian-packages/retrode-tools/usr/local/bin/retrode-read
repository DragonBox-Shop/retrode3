#!/bin/bash
# retrode-read slot - read game from slot
# return file name of result (empty if download failed)

case "$1" in
	/dev/slot-snes )	# SNES
		echo "10 0 " | /usr/local/bin/retrode >/tmp/$$
		echo /tmp/$$
		;;
	/dev/slot-md )	# MD
		echo "200" | /usr/local/bin/retrode >/tmp/$$
		FILENAME=$(fgrep "CRC32..." /tmp/$$ | sed 's/CRC32... [0-9a-zA-Z]* -> \(.*\).md/\1/')
		# genauer Pfad!?
		echo $FILENAME
		;;
	/dev/slot-nes )	# NES
		echo  "00 0" | /usr/local/bin/retrode >/tmp/$$
		echo /tmp/$$
		;;
	* )
		echo unknown device "$1"
		exit 1
		;;
esac
